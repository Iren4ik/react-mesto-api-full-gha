{"ast":null,"code":"var _jsxFileName = \"/Users/a1/Desktop/dev/react-mesto-auth/src/components/App.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport DeleteCardPopup from \"./DeleteCardPopup\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport { api } from \"../utils/api.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport ProtectedRouteElement from \"./ProtectedRoute\";\nimport { register, authorize, getContent } from \"../utils/auth.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [isPreloading, setPreloading] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [cardToDelete, setCardToDelete] = React.useState({});\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState();\n  const [isRegister, setIsRegister] = React.useState(false);\n  const navigate = useNavigate();\n\n  //Получение данных пользователя и карточек, если залогинился\n  React.useEffect(() => {\n    // console.log(localStorage);\n    if (loggedIn) {\n      // console.log(localStorage);\n      Promise.all([api.getProfileInfo(), api.getInitialCards()]).then(([dataUser, dataCards]) => {\n        console.log(dataCards);\n        setCurrentUser(dataUser);\n        setCards(dataCards);\n      }).catch(console.error);\n    }\n  }, [loggedIn]);\n\n  // React.useEffect(() => {\n  //   loggedIn &&\n  //     Promise.all([api.getProfileInfo(), api.getInitialCards()])\n  //     .then(([dataUser, dataCards]) => {\n  //       console.log(dataCards);\n  //       setCurrentUser(dataUser);\n  //       setCards(dataCards);\n  //     })\n  //     .catch(console.error);\n  //   }, [loggedIn]);\n\n  //Проверка токена при загрзке страницы\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    // если у пользователя есть токен в localStorage, \n    // эта функция проверит, действующий он или нет\n    if (token) {\n      getContent(token).then(res => {\n        if (res) {\n          setLoggedIn(true);\n          setEmail(res.data.email);\n          navigate('/', {\n            replace: true\n          });\n        }\n      }).catch(console.error);\n    }\n  }, [navigate]);\n\n  // Открытие попапа ававтара\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  // Открытие попапа реадиктирования попапа\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  // Открытие попапа добавления карточки\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  // Открытие попапа удаления карточки\n  function handleDeleteCardClick(card) {\n    setDeleteCardPopupOpen(true);\n    setCardToDelete(card);\n  }\n\n  // Открытие попапа успешной или не совсем регистрации\n  function infoTooltipPopupOpen() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  // Открытие выбранной карточки\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  // Закрытие попапов\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setDeleteCardPopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard(null);\n    setCardToDelete({});\n  }\n\n  //универсальная функция, принимающая функцию запроса\n  function handleSubmit(request) {\n    // изменяем текст кнопки до вызова запроса\n    setPreloading(true);\n    request().then(closeAllPopups).catch(console.error)\n    // возвращаем обратно начальный текст кнопки\n    .finally(() => setPreloading(false));\n  }\n\n  // Поставить лайк\n  function handleCardLike(card) {\n    function makeRequest() {\n      const isLiked = card.likes.some(i => i._id === currentUser._id);\n      // return позволяет дальше продолжать цепочку then, catch, finally\n      return api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n        setCards(state => state.map(c => c._id === card._id ? newCard : c));\n      }).catch(console.error);\n    }\n    handleSubmit(makeRequest);\n  }\n\n  // Удалить карточку\n  function handleCardDelete(card) {\n    function makeRequest() {\n      return api.deleteCard(card._id).then(() => {\n        setCards(state => state.filter(c => c._id !== card._id));\n      }).catch(console.error);\n    }\n    handleSubmit(makeRequest);\n  }\n\n  //Обновить данные профиля\n  function handleUpdateUser(inputValues) {\n    function makeRequest() {\n      return api.setUserInfo(inputValues).then(dataUser => {\n        setCurrentUser(dataUser);\n      }).catch(console.error);\n    }\n    handleSubmit(makeRequest);\n  }\n\n  // Обновить аватар\n  function handleUpdateAvatar(inputValue) {\n    function makeRequest() {\n      return api.setUserAvatar(inputValue).then(dataUser => {\n        setCurrentUser(dataUser);\n      }).catch(console.error);\n    }\n    handleSubmit(makeRequest);\n  }\n\n  // Добавить карточку\n  function handleAddPlaceSubmit(inputValue) {\n    function makeRequest() {\n      return api.postNewCard(inputValue).then(newCard => {\n        setCards([newCard, ...cards]);\n      }).catch(console.error);\n    }\n    handleSubmit(makeRequest);\n  }\n\n  //Обработка запроса на регистрацию\n  function handleRegister(email, password) {\n    register(email, password).then(res => {\n      if (res) {\n        setIsRegister(true);\n        infoTooltipPopupOpen();\n        navigate('/sign-in', {\n          replace: true\n        });\n      } else {\n        infoTooltipPopupOpen();\n        setIsRegister(false);\n      }\n    }).catch(() => {\n      infoTooltipPopupOpen();\n      setIsRegister(false);\n      console.error();\n    });\n  }\n\n  //Изменение статуса логина\n  function handleLoggedIn() {\n    setLoggedIn(true);\n  }\n\n  //Обработка запроса на авторизацию\n  function handleLogin(email, password) {\n    authorize(email, password).then(data => {\n      if (data.token) {\n        setEmail(email);\n        handleLoggedIn();\n        navigate('/', {\n          replace: true\n        });\n      }\n    }).catch(() => {\n      setLoggedIn(false);\n      infoTooltipPopupOpen();\n      console.error();\n    });\n  }\n\n  //Выход из системы\n  function handleLogout() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"token\");\n    navigate(\"/sign-in\");\n  }\n\n  //«Внедряем» данные из currentUser с помощью провайдера\n  //пропс value содержит значение, которое распространаяется дочерним элементам\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        onLogout: handleLogout,\n        email: email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-up\",\n          element: /*#__PURE__*/_jsxDEV(Register, {\n            onRegister: handleRegister\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/sign-in\",\n          element: /*#__PURE__*/_jsxDEV(Login, {\n            onLogin: handleLogin\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(ProtectedRouteElement, {\n            loggedIn: loggedIn,\n            element: Main,\n            onEditAvatar: handleEditAvatarClick,\n            onEditProfile: handleEditProfileClick,\n            onAddPlace: handleAddPlaceClick,\n            onCardClick: handleCardClick,\n            onCardLike: handleCardLike,\n            onTrashClick: handleDeleteCardClick,\n            cards: cards\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 22\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InfoTooltip, {\n        isOpen: isInfoTooltipOpen,\n        onClose: closeAllPopups,\n        isConfirmed: isRegister\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n        card: selectedCard,\n        onClose: closeAllPopups\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n        isOpen: isEditProfilePopupOpen,\n        onClose: closeAllPopups,\n        onUpdateUser: handleUpdateUser,\n        isPreloading: isPreloading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n        isOpen: isEditAvatarPopupOpen,\n        onClose: closeAllPopups,\n        onUpdateAvatar: handleUpdateAvatar,\n        isPreloading: isPreloading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n        isOpen: isAddPlacePopupOpen,\n        onClose: closeAllPopups,\n        onAddPlace: handleAddPlaceSubmit,\n        isPreloading: isPreloading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DeleteCardPopup, {\n        isOpen: isDeleteCardPopupOpen,\n        onClose: closeAllPopups,\n        isPreloading: isPreloading,\n        card: cardToDelete,\n        onCardDelete: handleCardDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 247,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"H1ALzIgm1B3ib4XByzmD/W2hZ1A=\", false, function () {\n  return [useNavigate];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Route","Routes","useNavigate","Header","Main","Footer","EditProfilePopup","EditAvatarPopup","AddPlacePopup","ImagePopup","DeleteCardPopup","InfoTooltip","Login","Register","api","CurrentUserContext","ProtectedRouteElement","register","authorize","getContent","jsxDEV","_jsxDEV","App","_s","isEditProfilePopupOpen","setEditProfilePopupOpen","useState","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isDeleteCardPopupOpen","setDeleteCardPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","isPreloading","setPreloading","currentUser","setCurrentUser","cards","setCards","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","loggedIn","setLoggedIn","email","setEmail","isRegister","setIsRegister","navigate","useEffect","Promise","all","getProfileInfo","getInitialCards","then","dataUser","dataCards","console","log","catch","error","token","localStorage","getItem","res","data","replace","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleDeleteCardClick","card","infoTooltipPopupOpen","handleCardClick","closeAllPopups","handleSubmit","request","finally","handleCardLike","makeRequest","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleUpdateUser","inputValues","setUserInfo","handleUpdateAvatar","inputValue","setUserAvatar","handleAddPlaceSubmit","postNewCard","handleRegister","password","handleLoggedIn","handleLogin","handleLogout","removeItem","Provider","value","children","className","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","path","element","onRegister","onLogin","onEditAvatar","onEditProfile","onAddPlace","onCardClick","onCardLike","onTrashClick","isOpen","onClose","isConfirmed","onUpdateUser","onUpdateAvatar","onCardDelete","_c","$RefreshReg$"],"sources":["/Users/a1/Desktop/dev/react-mesto-auth/src/components/App.js"],"sourcesContent":["import React from \"react\";\r\nimport { Route, Routes, useNavigate } from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\nimport InfoTooltip from \"./InfoTooltip\";\r\nimport Login from \"./Login\";\r\nimport Register from \"./Register\";\r\nimport { api } from \"../utils/api.js\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport ProtectedRouteElement from \"./ProtectedRoute\";\r\nimport {register, authorize, getContent} from \"../utils/auth.js\"\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\r\n  const [isDeleteCardPopupOpen, setDeleteCardPopupOpen] = React.useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\r\n  const [isPreloading, setPreloading] = React.useState(false);\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [selectedCard, setSelectedCard] = React.useState(null);\r\n  const [cardToDelete, setCardToDelete] = React.useState({});\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [email, setEmail] = React.useState();\r\n  const [isRegister, setIsRegister] = React.useState(false);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  //Получение данных пользователя и карточек, если залогинился\r\n  React.useEffect(() => {\r\n    // console.log(localStorage);\r\n    if (loggedIn) {\r\n    // console.log(localStorage);\r\n      Promise.all([api.getProfileInfo(), api.getInitialCards()])\r\n      .then(([dataUser, dataCards]) => {\r\n        console.log(dataCards);\r\n        setCurrentUser(dataUser);\r\n        setCards(dataCards);\r\n      })\r\n      .catch(console.error);\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  // React.useEffect(() => {\r\n  //   loggedIn &&\r\n  //     Promise.all([api.getProfileInfo(), api.getInitialCards()])\r\n  //     .then(([dataUser, dataCards]) => {\r\n  //       console.log(dataCards);\r\n  //       setCurrentUser(dataUser);\r\n  //       setCards(dataCards);\r\n  //     })\r\n  //     .catch(console.error);\r\n  //   }, [loggedIn]);\r\n\r\n  //Проверка токена при загрзке страницы\r\n  React.useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    // если у пользователя есть токен в localStorage, \r\n    // эта функция проверит, действующий он или нет\r\n    if (token){\r\n      getContent(token)\r\n        .then((res) => {\r\n          if (res) {\r\n            setLoggedIn(true);\r\n            setEmail(res.data.email);\r\n            navigate('/', {replace: true})\r\n          }\r\n        })\r\n        .catch(console.error);\r\n    }\r\n  }, [navigate]);\r\n\r\n  // Открытие попапа ававтара\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  // Открытие попапа реадиктирования попапа\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  // Открытие попапа добавления карточки\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  // Открытие попапа удаления карточки\r\n  function handleDeleteCardClick(card) {\r\n    setDeleteCardPopupOpen(true);\r\n    setCardToDelete(card);\r\n  }\r\n\r\n  // Открытие попапа успешной или не совсем регистрации\r\n  function infoTooltipPopupOpen() {\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  // Открытие выбранной карточки\r\n  function handleCardClick(card) {\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  // Закрытие попапов\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setDeleteCardPopupOpen(false);\r\n    setIsInfoTooltipOpen(false)\r\n    setSelectedCard(null);\r\n    setCardToDelete({});\r\n  }\r\n\r\n  //универсальная функция, принимающая функцию запроса\r\n  function handleSubmit(request) {\r\n    // изменяем текст кнопки до вызова запроса\r\n    setPreloading(true);\r\n    request()\r\n      .then(closeAllPopups)\r\n      .catch(console.error)\r\n      // возвращаем обратно начальный текст кнопки\r\n      .finally(() => setPreloading(false));\r\n  }\r\n\r\n  // Поставить лайк\r\n  function handleCardLike(card) {\r\n    function makeRequest() {\r\n      const isLiked = card.likes.some((i) => i._id === currentUser._id);\r\n      // return позволяет дальше продолжать цепочку then, catch, finally\r\n      return api.changeLikeCardStatus(card._id, !isLiked)\r\n        .then((newCard) => {\r\n          setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\r\n        })\r\n        .catch(console.error);\r\n    }\r\n    handleSubmit(makeRequest);\r\n  }\r\n\r\n  // Удалить карточку\r\n  function handleCardDelete(card) {\r\n    function makeRequest() {\r\n      return api.deleteCard(card._id)\r\n        .then(() => {\r\n          setCards((state) => state.filter((c) => c._id !== card._id));\r\n        })\r\n        .catch(console.error);\r\n    }\r\n    handleSubmit(makeRequest);\r\n  }\r\n\r\n  //Обновить данные профиля\r\n  function handleUpdateUser(inputValues) {\r\n    function makeRequest() {\r\n      return api.setUserInfo(inputValues)\r\n        .then((dataUser) => {\r\n          setCurrentUser(dataUser);\r\n        })\r\n        .catch(console.error);\r\n    }\r\n    handleSubmit(makeRequest);\r\n  }\r\n\r\n  // Обновить аватар\r\n  function handleUpdateAvatar(inputValue) {\r\n    function makeRequest() {\r\n      return api.setUserAvatar(inputValue)\r\n        .then((dataUser) => {\r\n          setCurrentUser(dataUser);\r\n        })\r\n        .catch(console.error);\r\n    }\r\n    handleSubmit(makeRequest);\r\n  }\r\n\r\n  // Добавить карточку\r\n  function handleAddPlaceSubmit(inputValue) {\r\n    function makeRequest() {\r\n      return api.postNewCard(inputValue)\r\n        .then((newCard) => {\r\n          setCards([newCard, ...cards]);\r\n        })\r\n        .catch(console.error);\r\n    }\r\n    handleSubmit(makeRequest);\r\n  }\r\n\r\n    //Обработка запроса на регистрацию\r\n    function handleRegister(email, password) {\r\n      register(email, password)\r\n      .then((res) => {\r\n        if (res) {\r\n          setIsRegister(true);\r\n          infoTooltipPopupOpen();\r\n          navigate('/sign-in', {replace: true});\r\n        } else {\r\n          infoTooltipPopupOpen();\r\n          setIsRegister(false);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        infoTooltipPopupOpen();\r\n        setIsRegister(false);\r\n        console.error();\r\n      })\r\n    }\r\n  \r\n    //Изменение статуса логина\r\n    function handleLoggedIn() {\r\n      setLoggedIn(true);\r\n    }\r\n  \r\n    //Обработка запроса на авторизацию\r\n    function handleLogin(email, password) {\r\n      authorize(email, password)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setEmail(email);\r\n          handleLoggedIn();\r\n          navigate('/', {replace: true})\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setLoggedIn(false);\r\n        infoTooltipPopupOpen();\r\n        console.error();\r\n      })\r\n    }\r\n  \r\n    //Выход из системы\r\n    function handleLogout() {\r\n      setLoggedIn(false);\r\n      localStorage.removeItem(\"token\");\r\n      navigate(\"/sign-in\");\r\n    }\r\n\r\n  //«Внедряем» данные из currentUser с помощью провайдера\r\n  //пропс value содержит значение, которое распространаяется дочерним элементам\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header onLogout={handleLogout} email={email}/>\r\n\r\n        <Routes>\r\n          <Route path=\"/sign-up\" element={<Register onRegister={handleRegister}/>} />\r\n          <Route path=\"/sign-in\" element={<Login onLogin={handleLogin}/>} />\r\n          {/* <Route path='*' \r\n              element={loggedIn ? (<Navigate to='/' replace/>) : (<Navigate to='/sign-in'replace/>)} \r\n          /> */}\r\n          <Route\r\n            path=\"/\"\r\n            element={<ProtectedRouteElement \r\n              loggedIn={loggedIn} \r\n              element={Main}\r\n                onEditAvatar={handleEditAvatarClick}\r\n                onEditProfile={handleEditProfileClick}\r\n                onAddPlace={handleAddPlaceClick}\r\n                onCardClick={handleCardClick}\r\n                onCardLike={handleCardLike}\r\n                onTrashClick={handleDeleteCardClick}\r\n                cards={cards}\r\n            />} \r\n          />\r\n        </Routes>\r\n\r\n        <Footer />\r\n\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          isConfirmed={isRegister}\r\n        />\r\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n          isPreloading={isPreloading}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          isPreloading={isPreloading}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          isPreloading={isPreloading}\r\n        />\r\n        <DeleteCardPopup\r\n          isOpen={isDeleteCardPopupOpen}\r\n          onClose={closeAllPopups}\r\n          isPreloading={isPreloading}\r\n          card={cardToDelete}\r\n          onCardDelete={handleCardDelete}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}