{"ast":null,"code":"import React from\"react\";export function usePopupClose(isOpen,closePopup){React.useEffect(function(){if(!isOpen)return;// останавливаем действие эффекта, если попап закрыт\nvar handleOverlay=function handleOverlay(event){// если есть `popup_opened` в классах блока, значит, кликнули на оверлей\nif(event.target.classList.contains(\"popup_opened\")){closePopup();}};var handleEscape=function handleEscape(e){if(e.key===\"Escape\"){closePopup();}};document.addEventListener(\"keydown\",handleEscape);document.addEventListener(\"mousedown\",handleOverlay);//  удаляем обработчики в `clean-up`- функции\nreturn function(){document.removeEventListener(\"keydown\",handleEscape);document.removeEventListener(\"mousedown\",handleOverlay);};// следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n},[isOpen,closePopup]);}","map":{"version":3,"names":["React","usePopupClose","isOpen","closePopup","useEffect","handleOverlay","event","target","classList","contains","handleEscape","e","key","document","addEventListener","removeEventListener"],"sources":["/Users/a1/Desktop/dev/react-mesto-api-full-gha/frontend/src/hooks/usePopupClose.js"],"sourcesContent":["import React from \"react\";\n\nexport function usePopupClose(isOpen, closePopup) {\n  React.useEffect(() => {\n    if (!isOpen) return; // останавливаем действие эффекта, если попап закрыт\n\n    const handleOverlay = (event) => {\n      // если есть `popup_opened` в классах блока, значит, кликнули на оверлей\n      if (event.target.classList.contains(\"popup_opened\")) {\n        closePopup();\n      }\n    };\n\n    const handleEscape = (e) => {\n      if (e.key === \"Escape\") {\n        closePopup();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscape);\n    document.addEventListener(\"mousedown\", handleOverlay);\n\n    //  удаляем обработчики в `clean-up`- функции\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape);\n      document.removeEventListener(\"mousedown\", handleOverlay);\n    };\n    // следим за `isOpen`, чтобы срабатывало только при открытии, а не при любой перерисовке компонента\n  }, [isOpen, closePopup]);\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,MAAO,SAAS,CAAAC,aAAaA,CAACC,MAAM,CAAEC,UAAU,CAAE,CAChDH,KAAK,CAACI,SAAS,CAAC,UAAM,CACpB,GAAI,CAACF,MAAM,CAAE,OAAQ;AAErB,GAAM,CAAAG,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/B;AACA,GAAIA,KAAK,CAACC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAE,CACnDN,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAED,GAAM,CAAAO,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1B,GAAIA,CAAC,CAACC,GAAG,GAAK,QAAQ,CAAE,CACtBT,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAEDU,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAEJ,YAAY,CAAC,CAClDG,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAET,aAAa,CAAC,CAErD;AACA,MAAO,WAAM,CACXQ,QAAQ,CAACE,mBAAmB,CAAC,SAAS,CAAEL,YAAY,CAAC,CACrDG,QAAQ,CAACE,mBAAmB,CAAC,WAAW,CAAEV,aAAa,CAAC,CAC1D,CAAC,CACD;AACF,CAAC,CAAE,CAACH,MAAM,CAAEC,UAAU,CAAC,CAAC,CAC1B"},"metadata":{},"sourceType":"module","externalDependencies":[]}